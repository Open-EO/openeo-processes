{
  "id": "aggregate_spatial_window",
  "summary": "Zonal statistics for rectangular windows",
  "description": "Aggregates statistics over the spatial dimensions. This process passes a list of values to the reducer.\n\nThe results are computed dividing the input X/Y grid into x_size/y_size non-overlapping windows and applying the reducer process to each window.\nIf X and Y are not multiple of x_size/y_size NaNs padding before the computation is applied.",
  "categories": [
    "cubes",
    "aggregate & resample"
  ],
  "parameters": [
    {
      "name": "data",
      "description": "A raster data cube.",
      "schema": {
        "type": "object",
        "subtype": "raster-cube"
      }
    },
    {
      "name": "reducer",
      "description": "A reducer to be applied on all values of each geometry. A reducer is a single process such as ``mean()`` or a set of processes, which computes a single value for a list of values, see the category 'reducer' for such processes.",
      "schema": {
        "type": "object",
        "subtype": "process-graph",
        "parameters": [
          {
            "name": "data",
            "description": "An array with elements of any type.",
            "schema": {
              "type": "array",
              "items": {
                "description": "Any data type."
              }
            }
          },
          {
            "name": "context",
            "description": "Additional data passed by the user.",
            "schema": {
              "description": "Any data type."
            },
            "optional": true,
            "default": null
          }
        ]
      }
    },
	{
		"name": "size",
		"description": "Window sizes (pixels) along each dimension.\n\nFirst value correspond to Window size along X or Longitude and second to Window size along Y or Latitude.",
		"schema": {
			"type": "array",
			"items": {
				"type": "object",
				"subtype": "chunk-size",
				"required": [
					"value"
				],
				"properties": {
					"value": {
							"type": "number",
							"minimum": 1,
							"description": "The unit the values are given in pixels (`px`)"
					}
				}
			}
		}
	},
    {
      "name": "boundary",
      "description": "Operation to apply if X/Y are not multiple of x_size/y_size. Options are:\n\n- pad (default): pad the datacube with NaNs to fit window dimensions.\n\n- trim: trim the datacube to fit window dimensions.",
      "schema": {
        "type": "string",
        "enum": [
          "pad",
          "trim"
        ]
      },
      "optional": true,
      "default": "pad"
    },
    {
      "name": "context",
      "description": "Additional data to be passed to the reducer.",
      "schema": {
        "description": "Any data type."
      },
      "optional": true,
      "default": null
    }
  ],
  "returns": {
    "description": "A data cube with the newly computed values and the same dimensions.\n\nThe resolution will change, depending on the chosen parameters. It decreases for the dimensions which have the corresponding parameter `size` = [`x_size`,`y_size`] set to values greater than 1.\n\nThe dimension labels will be set to the center of the window. The other dimension properties (name, type and reference system) remain unchanged.",
    "schema": {
      "type": "object",
      "subtype": "vector-cube"
    }
  }
}