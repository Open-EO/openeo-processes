{
    "id": "cloud_detection",
    "summary": "Cloud detection",
    "description": "Detects clouds and cloud shadow in optical imagery. By default, the cloud mask is applied to the input data cube. Set `apply_mask` to `false` to add the cloud mask as a new band.",
    "categories": [
        "cubes",
        "optical"
    ],
    "experimental": true,
    "parameters": [
        {
            "description": "Data cube containing multi-spectral optical top of atmosphere reflectances on which to perform cloud detection.",
            "name": "data",
            "schema": {
                "subtype": "raster-cube",
                "type": "object"
            }
        },
        {
            "description": "The cloud detection method to use.\n\nThe supported algorithms can vary between back-ends. Set to `null` (the default) to allow the back-end to choose, which will improve portability, but reduce reproducibility.",
            "name": "method",
            "optional": true,
            "default": null,
            "schema": {
                "type": [
                    "string",
                    "null"
                ],
                "enum": [
                    "sen2cor",
                    "fmask",
                    "s2cloudless"
                ]
            }
        },
        {
            "description": "By default, the cloud mask is applied to the input data cube. If set to `false`, the cloud mask information is added as one or more additional bands. Some implementations may add additional bands.",
            "name": "apply_mask",
            "optional": true,
            "default": true,
            "schema": {
                "type": "boolean"
            }
        }
    ],
    "returns": {
        "description": "The original data cube, either with the cloud mask added as a band, or the cloud mask applied to the pixels.",
        "schema": {
            "subtype": "raster-cube",
            "type": "object"
        }
    },
    "exceptions": {
        "UnsupportedParameter": {
            "message": "One of the provided parameters is not supported by this back-end. This can be resolved by using default parameters, or using a back-end that supports the parameter value."
        }
    },
    "links": [
        {
            "rel": "about",
            "href": "https://bok.eo4geo.eu/TA14-2-2-1-3",
            "title": "Cloud mask explained by EO4GEO body of knowledge."
        }
    ]
}