{
    "id": "apply_neighbourhood",
    "summary": "Apply a process to pixels in a multidimensional neighbourhood. Multiple neighbourhoods can be processed independently.",
    "description": "Apply a focal process to a datacube. A focal process is a process that works on a 'neighbourhood' of pixels. The neighbourhood can extend into multiple dimensions. A padding can be specified so that neighbourhoods have overlapping boundaries. This allows for continuity of the output.\n\n The process should not add new dimensions, or remove entire dimensions, but the result can use different dimension labels.",
    "categories": [
        "cubes"
    ],
    "parameters": [
        {
            "name": "data",
            "description": "A data cube.",
            "schema": {
                "type": "object",
                "subtype": "raster-cube"
            }
        },
         {
            "name": "process",
            "description": "Process to be applied on all neighbourhoods. The specified process needs to accept an array as parameter and must return an array with least one element. A process may consist of multiple sub-processes.",
            "schema": {
                "type": "object",
                "subtype": "process-graph",
                "parameters": [
                    {
                        "name": "data",
                        "description": "A labeled array with elements of any type.",
                        "schema": {
                            "type": "array",
                            "subtype": "labeled-array",
                            "items": {
                                "description": "Any data type."
                            }
                        }
                    },
                    {
                        "name": "context",
                        "description": "Additional data passed by the user.",
                        "schema": {
                            "description": "Any data type."
                        },
                        "optional": true,
                        "default": null
                    }
                ]
            }
        },
        {
            "name": "neighbourhood_size",
            "description": "Chunk sizes along each dimension. Default is to provide only one value.\n This object maps dimension names to either a physical measure, (e.g. 100m,10days), or pixels (e.g. 32px).\n To include all values along a dimension, use 'all'. This may result in an exception if the dimension is too large to be fully included. \n ",
            "schema": {
                "type": "object"
            }
        },
        {
            "name": "neighbourhood_padding",
            "description": "Padding of chunks along each dimension. This allows neighbourhoods to overlap. For instance a temporal dimension can add 1 month before and after a neighbourhood. In the spatial dimensions, this is often a number of pixels. Modifying padded data in subsequent operations should have no effect.",
            "schema": {
                "type": "object"
            }
        }
    ],
    "returns": {
        "description": "A data cube with the newly computed values. The resolution and the number of dimensions are the same as for the original data cube.",
        "schema": {
            "type": "object",
            "subtype": "raster-cube"
        }
    },
    "exceptions": {
        "DimensionNotAvailable": {
            "message": "A dimension with the specified name does not exist."
        }
    }
}