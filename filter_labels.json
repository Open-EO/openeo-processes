{
    "id": "filter_labels",
    "summary": "Filter dimension labels based on a condition",
    "description": "Filters the dimension labels in the data cube for the given dimension. Only the dimension labels that match the specified condition are preserved, all other labels with their corresponding data get removed.",
    "categories": [
        "cubes",
        "filter"
    ],
    "parameter_order": [
        "data",
        "condition",
        "dimension"
    ],
    "parameters": {
        "data": {
            "description": "A data cube.",
            "schema": {
                "type": "object",
                "subtype": "raster-cube"
            },
            "required": true
        },
        "condition": {
            "description": "A condition that is evaluated against each dimension label in the specified dimension. A dimension label and the corresponding data is preserved for the given dimension, if the condition returns `true`.",
            "schema": {
                "type": "object",
                "subtype": "process-graph",
                "parameters": {
                    "value": {
                        "description": "A single dimension label to compare against. The data type of the parameter depends on the dimension labels stored for the dimension.",
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "string",
                                "format": "date-time",
                                "subtype": "date-time"
                            },
                            {
                                "type": "string",
                                "format": "date",
                                "subtype": "date"
                            },
                            {
                                "type": "string",
                                "format": "time",
                                "subtype": "time"
                            }
                        ]
                    }
                }
            },
            "required": true
        },
        "dimension": {
            "description": "The name of the dimension to filter on. Fails with a `DimensionNotAvailable` error if the specified dimension does not exist.\n\n**Remarks:**\n\n* The default dimensions a data cube provides are described in the collection's metadata field `cube:dimensions`.\n* There could be multiple spatial dimensions such as `x`, `y` or `z`.\n* For multi-spectral imagery there is usually a separate dimension of type `bands` for the bands.",
            "schema": {
                "type": "string"
            },
            "required": true
        }
    },
    "returns": {
        "description": "The filtered data cube. Therefore, the cardinality of the dimension is potentially lower, but the resolution and the number of dimensions are the same as for the original data cube.",
        "schema": {
            "type": "object",
            "subtype": "raster-cube"
        }
    },
    "exceptions": {
        "DimensionNotAvailable": {
            "message": "A dimension with the specified name does not exist."
        }
    },
    "examples": [
        {
            "description": "This example is loading the Sentinel-2 collection into a data cube and filters the data cube to only contain data from platform Sentinel-2A. This example assumes that the data cube has a dimension `platform` so that computations can distinguish between Sentinel-2A and Sentinel-2B data.",
            "process_graph": {
                "load": {
                    "process_id": "load_collection",
                    "arguments": {
                        "id": "Sentinel-2",
                        "spatial_extent": null,
                        "temporal_extent": null
                    }
                },
                "filter": {
                    "process_id": "filter_labels",
                    "arguments": {
                        "data": {
                            "from_node": "load"
                        },
                        "condition": {
                            "callback": {
                                "eq": {
                                    "process_id": "eq",
                                    "arguments": {
                                        "x": {
                                            "from_argument": "value"
                                        },
                                        "y": "Sentinel-2A",
                                        "case_sensitive": false
                                    },
                                    "result": true
                                }
                            }
                        },
                        "dimension": "platform"
                    },
                    "result": true
                }
            }
        }
    ]
}